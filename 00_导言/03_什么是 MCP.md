# 什么是 MCP（Model Context Protocol）？

> 本章同样是面向「应用开发者」的使用说明，但会尽量用「科普风」来讲清楚。  
> 在这个项目里，**无论你选用哪个 Agent 框架（如 LangChain、LangGraph、CrewAI、openai-agents 等），我们都会用 MCP 来统一管理「工具层」**。

可以先把 MCP 想象成：**Agent 接入外部世界的「USB‑C 接口标准」**——只要工具长成 MCP 服务器的样子，就能被不同的 Agent 客户端统一发现和调用。

---

## 1. MCP 是什么？

[Model Context Protocol（MCP）](https://modelcontextprotocol.io/docs/getting-started/intro) 是一个**把 AI 应用安全地连接到外部系统**的开放标准。  
不用被名字吓到，可以先把它理解成：**「大模型 / Agent 和外部世界说话时，大家约定好的一套规则」**。

类比一下：

- 对电子设备来说，USB‑C 提供了统一的充电 / 传输接口；
- 对 AI 应用和 Agent 来说，MCP 提供了统一的：
  - **拿数据的方式**：比如本地文件、数据库、知识库、第三方 API；
  - **用工具的方式**：比如搜索、算公式、调用业务服务、触发自动化工作流；
  - **喂给模型的方式**：把这些结果整理成模型能理解的上下文。

在本项目中，你会反复看到一个抽象：  
**「MCP 服务器 = 一组可声明的工具与资源清单」**，  
**「Agent / 框架 = MCP 客户端的一种实现」**。

---

## 2. 为什么 MCP 值得你关心？

从不同角色的角度看，MCP 大致带来这些好处（先感性理解就好）：

- **对应用 / Agent 开发者**

  - 以后再接一个系统，不用「重新发明轮子」，按 MCP 的写法接上就行；
  - 想到一个新点子，可以很快把它变成一个可用工具。

- **对 Agent / 框架本身**

  - 可以像插积木一样，不断「加插件」扩展能力；
  - 工具怎么实现的，可以和框架本身解耦开来。

- **对最终用户**
  - 感受到的是「这个助手真的会帮我办事」；
  - 在你授权的前提下，它可以替你看数据、点按钮，而不是只陪你聊天。

在本项目的实践中，一个关键设计就是：  
**不同框架的示例共用同一套 MCP 工具（例如财经新闻 MCP），你只需要写一遍工具，就能在多个 Agent 框架中重复使用。**

---

## 3. MCP 能做什么？（几个直观例子）

MCP 本身不限定具体业务，它只是一个「连接标准」。但通过它可以轻松构建出很多有用能力，例如：

- 访问你的日程、文档系统（如 Google Calendar、Notion），做真正懂你数据的个人助理。
- 让编程助手根据设计稿（例如 Figma）生成完整的前端代码。
- 让企业内的聊天机器人，横跨多个数据库和内部服务做数据分析和操作。
- 驱动外部应用：在 Blender 里建模，然后把结果发给 3D 打印机完成打印。

本仓库里会从一个**财经新闻 MCP** 入手，做一些更贴近你能马上上手的例子，比如：

- 通过 MCP 工具查询最新的财经新闻或行情数据；
- 让 Agent 帮你汇总、对比、解释这些数据；
- 在不同框架中，复用同一套「财经工具」完成类似的任务。

这些例子的共同点是：**不再只是「回答问题」，而是「连接外部资源并采取行动」**。

---

## 4. MCP 是怎么工作的？（客户端 / 服务器）

在 MCP 的世界里，大致有两类角色，可以简单想象成「说需求的一方」和「提供能力的一方」：

- **客户端（Client）**

  - 站在「AI 应用 / Agent / IDE 助手」这一侧；
  - 负责发起调用、显示可用工具和资源、承载对话和推理过程。

- **服务器（Server）**
  - 由你（或第三方）实现；
  - 把某个数据源 / 业务域里的能力，以标准形式「暴露」出来；
  - 例如一个「财经新闻 MCP 服务器」，提供：`list_latest_news`、`get_stock_quote`、`query_macro_data` 等工具。

客户端通过 MCP：

- 能看见服务器上「有哪些按钮可以按」（有哪些资源和工具）；
- 用统一的方式去「按按钮」（调用工具，拿到结果）；
- 再把结果整理后喂给大模型，让它基于这些信息做下一步决策。

由于大家都遵守同一套规则：

- 同一个 MCP 服务器，可以被多个不同的 Agent 框架复用；
- 同一个 Agent 客户端，也可以挂接多个来自不同团队 / 厂商的 MCP 服务器。

---

## 5. MCP 和 Agent 的关系（承接上一章）

在《什么是 AI Agent？》这一章里，我们提到 Agent 通常需要几个核心能力：

- 感知（Perception）
- 推理（Reasoning）
- 行动（Action）
- 记忆（Memory）
- 目标与效用（Goals & Utility）

其中，**「行动」和很大一部分「感知」往往都离不开外部工具和数据源**。  
这正是 MCP 发挥作用的地方：

- 让 Agent **清清楚楚、按规矩地**调用外部工具（调用了什么、传了什么参数，都能被记录下来）；
- 用同一套「插口」去发现和组合不同来源的功能。

换句话说：**MCP 是把 Agent 从「会想」变成「能干」的关键拼图之一**。  
在本项目中，你会看到：同一个 MCP 工具会被挂在不同框架的 Agent 底下，但它们调用的其实是同一套底层能力。

---

## 6. 作为开发者，你可以从哪两端入手？

如果你想在自己的项目里用好 MCP，可以从两个方向来理解和上手（在本仓库中你都会遇到）：

1. **当一个「工具提供方」：构建 MCP 服务器**

   - 把你已有的能力（例如：财经数据 API、内部业务系统）「包一层壳」，做成 MCP 服务器；
   - 用「工具清单」的方式对外说明：我有哪些按钮可以按、各自是干嘛的；
   - 任何 MCP 兼容客户端都可以发现并使用这些工具。

2. **当一个「工具使用方」：构建 / 接入 MCP 客户端**

   - 在你的 Agent 应用中，对接一个或多个 MCP 服务器；
   - 在推理和决策过程中，根据需要选择合适的「按钮」去按；
   - 把调用结果塞回给模型，让它结合这些信息继续思考或生成答案。

这两条路径是相辅相成的：  
**当 MCP 服务器越来越多、能力越来越丰富时，任意 MCP 兼容的客户端都能像「拼乐高」一样组合它们，快速搭出新的 AI 应用。**

---

## 7. 实践 MCP 时需要注意什么？（轻度工程视角）

如果你想把 MCP 用在真实项目里，哪怕是一个小 side project，下面三件事最值得先记住：

1. **安全与权限要「克制」**

   - 只给 Agent 当前任务真正需要的权限，而不是「一把梭全都给」；
   - 涉及隐私和商业机密时，尽量有日志可查，知道「谁、在什么时候、通过哪个工具，访问了哪些数据」。

2. **第三方服务的稳定性**

   - 很多 MCP 工具背后连着外部 API 或数据库，这些东西有配额、有延迟，也会出错；
   - 设计工具时要想好：如果偶尔失败，要不要重试？要不要给用户一个「现在系统有点忙」之类的友好提示？

3. **从小处开始，逐步扩展**

   - 一开始可以只做一两个最有价值的 MCP 工具（比如「查财经新闻」、「查股票价格」），先保证这条链路顺畅；
   - 等你对「Agent + MCP」这套组合熟悉之后，再慢慢加更多工具，不用一口气做完所有想象中的功能。

---

## 8. 小结：为什么本项目要「全局 MCP 化」？

在这个教程项目里，我们会刻意做一件事：

- **无论使用哪个 Agent 框架，统一通过 MCP 来访问外部工具和数据（包括财经新闻 MCP 等）。**

这样做的好处是：

- 你可以专注对比框架本身的「手感」和编程模型，而不是被不同的工具集成方式分散注意力；
- 任何你自己实现的 MCP 工具，都可以在多个框架之间复用；
- 将来如果要把示例接到真实生产环境，只需要替换 / 扩展 MCP 服务器，而不是重写所有示例代码。

接下来，你可以一边阅读后续章节，一边思考：  
**「这里这个功能，是应该做成一个 MCP 工具，还是直接写在框架代码里？」**  
这会帮助你形成一个更工程化的 Agent 设计思路，而不是只停留在 prompt 层面。
