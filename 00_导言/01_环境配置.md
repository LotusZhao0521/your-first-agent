# 环境配置

本项目的所有示例（`.py` + `.ipynb`）都会统一使用 **Python + `uv`** 来管理依赖，并在**仓库根目录**的 `pyproject.toml` 中声明所有需要的包。  
你只需要把环境配好，然后在仓库根目录执行几条命令，就可以跟着文档一步步体验从单 Agent 到多 Agent 的开发过程。

---

## 1. 你需要准备什么

- **操作系统**
  - Windows（推荐开启 WSL2）、macOS、主流 Linux 发行版均可。
- **终端 / 命令行工具**
  - Windows：PowerShell / Windows Terminal / WSL 终端均可。
  - macOS / Linux：系统自带终端即可。
- **Git（必需）**
  - 本项目默认你可以使用 `git clone` 获取和更新代码，因此请先安装并配置好 Git。
- **Python 版本**
  - 本项目在 `pyproject.toml` 中约定：`requires-python = ">=3.12"`
  - 建议安装 **Python 3.12 或更新版本**。

---

## 2. 安装 Python 3.12+

如果你已经有 Python 3.12+，可以通过下面命令确认版本：

```bash
python --version
python3 --version
```

只要其中一个输出的主版本号是 `3.12`（或更高），就可以直接跳到下一节「安装 uv」。

> 完全小白可以简单照做：
>
> - Windows：从 Python 官网下载安装包，记得勾选「Add python.exe to PATH」。
> - macOS：可以使用官方安装包或 Homebrew（`brew install python`）。
> - Linux / WSL：优先使用发行版包管理器（如 `apt`, `dnf` 等）安装最新版 Python 3。

---

## 3. 安装 uv（本项目统一的包管理器）

本项目约定：**不直接使用 `pip` 安装依赖，而是全部交给 `uv` 管理**。  
`uv` 会根据根目录的 `pyproject.toml` / `uv.lock` 自动创建虚拟环境并安装依赖。

### 3.1 一键安装 uv

在 **macOS / Linux / WSL** 终端中，执行：

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

安装完成后，关闭并重新打开终端，然后确认：

```bash
uv --version
```

如能正常输出版本号，说明安装成功。

> Windows 原生 PowerShell 用户，可以参考官方文档安装，或直接在 WSL 中执行上面的安装命令（推荐在 WSL 中完成本教程的所有步骤）。

---

## 4. 使用 uv 同步依赖（自动创建虚拟环境）

在项目根目录执行：

```bash
uv sync
```

这一步会根据根目录的 `pyproject.toml` 和 `uv.lock`：

- 创建或更新项目专用的虚拟环境（通常在 `.venv/` 目录）。
- 安装项目所需的所有依赖（包括 Notebook 相关依赖，如 `jupyter`、`ipykernel` 等）。

首次数可能会稍慢，后续只要依赖不变，再执行会非常快。

---

## 5. 运行 Python 脚本与 Notebook

本项目的目标是：**读者只需要在根目录执行少量命令，就能运行各个示例**。  
统一约定通过 `uv run` 来运行脚本和 Notebook。

### 6.1 运行 Python 脚本

在根目录下，用下面的形式运行任意脚本（示例路径仅供参考，后续章节会给出具体命令）：

```bash
uv run python 00-course-setup/first_llm_call.py
```

或者：

```bash
uv run python path/to/your_script.py
```

`uv run` 会自动在项目虚拟环境中执行命令，你不需要手动 `source .venv/bin/activate`。

### 6.2 运行 Jupyter Notebook

你可以用 `uv` 启动 Notebook 环境：

```bash
uv run jupyter notebook
# 或者
uv run jupyter lab
```

浏览器打开后：

- 在左侧文件列表中找到对应的 `.ipynb` 文件（例如后续的 `00-course-setup/first_llm_call.ipynb`）。
- 打开后，如果提示选择 Kernel，选择带有项目虚拟环境标识的 Python（通常会有 `.venv` 或 `your-first-agent` 的字样）。

这样，无论是 `.py` 还是 `.ipynb`，都能共享同一套由 `uv` 管理的依赖。

---

## 6. 关于 `.env` 和 API Key（预告）

在 `TODO.md` 中，我们约定会提供 `.env.example`，用于统一管理各种 API Key（如 OpenAI、通义千问等）。  
后续章节会详细说明具体变量的含义和填写方式，这里先给出整体约定：

- 仓库中会提供一个示例文件：`.env.example`。
- 你只需要复制一份并重命名为 `.env`：

```bash
cp .env.example .env
```

- 按注释在 `.env` 中填入自己的 API Key。
- 代码会通过 `python-dotenv` 自动加载 `.env` 中的配置，你不需要在代码里硬编码 Key。
- 请**不要**把 `.env` 提交到 Git 仓库（`.gitignore` 会默认忽略它）。

---

## 7. 小结：你现在应该具备的环境状态

完成本章节后，你应该已经：

1. 安装好了 **Python 3.12+**。
2. 安装好了 **`uv`**，在终端中可以执行 `uv --version`。
3. 把本项目代码下载/克隆到本地，并在根目录成功执行过一次 `uv sync`。
4. 知道如何使用：
   - `uv run python xxx.py` 运行示例脚本。
   - `uv run jupyter notebook` / `uv run jupyter lab` 运行 Notebook 示例。

如果以上 4 点都没问题，你就可以继续阅读后续章节，从「第一次调用 LLM」开始正式体验你的第一个 Agent 开发教程了。
